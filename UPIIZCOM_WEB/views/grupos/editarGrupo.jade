extends ../layout


block CONTENIDO
    div(ng-controller='TablaCtrl' ng-init="getImagenes(); grupo._id='#{grupo._id}'; grupo.nombre='#{grupo.nombre}'; grupo.descripcion='#{grupo.descripcion}'")
        {{grupo.nombre}} 
        .container-fluid
            .page-header.min-height-300.border-radius-xl.mt-4(style="background-image: url('../../assets/img/curved-images/curved0.jpg'); background-position-y: 50%;")
                span.mask.bg-gradient-primary.opacity-6
            .card.card-body.blur.shadow-blur.mx-4.mt-n6.overflow-hidden
                .row.gx-4
                    .col-auto
                        .avatar.avatar-xl.position-relative
                            img.w-100.border-radius-lg.shadow-sm(src='../../assets/img/bruce-mars.jpg' alt='profile_image')
                    .col-auto.my-auto
                        .h-100
                            h5.mb-1 #{datos.NOMBRE}
                            p.mb-0.font-weight-bold.text-sm #{datos.CARRERA} / #{datos.BOLETA}
        .container-fluid.py-4
            .row
                .col-12
                    .row
                        .col-12.col-lg-8.mx-auto.mt-4.mb-sm-5.mb-3
                            .multisteps-form__progress
                                button.multisteps-form__progress-btn.js-active(type='button' title='Product Info') 1. Información
                                button.multisteps-form__progress-btn(type='button' title='Media') 2. Imagen
                    .row
                        .col-12.col-lg-8.m-auto
                            form.multisteps-form__form.mb-8
                                .card.multisteps-form__panel.p-3.border-radius-xl.bg-white.js-active(data-animation='FadeIn')
                                    h5.font-weight-bolder Información de Grupo
                                    .multisteps-form__content
                                        .row.mt-3
                                            .col-12.col-sm-6
                                                label Nombre
                                                input.multisteps-form__input.form-control(type='text' ng-model="grupo.nombre" onkeypress="return alfanumerico(event)" onpaste="return false")
                                            .col-12.col-sm-6.mt-3.mt-sm-0
                                                label Tipo
                                                select#choices-category.form-control(name='choices-category' ng-model='grupo.tipo')
                                                    option(value='Institucional') Institucional
                                                    option(value='Administrativo') Administrativo 
                                                    option(value='Social') Social
                                        .row
                                            .col-sm-12
                                                label.mt-4 Descripción
                                                p.form-text.text-muted.text-xs.ms-1.d-inline (opcional)
                                                input.multisteps-form__input.form-control(type="text" ng-model = 'grupo.descripcion' onkeypress="return alfanumerico(event)" onpaste="return false")
                                        .button-row.d-flex.mt-4
                                            button.btn.bg-gradient-dark.ms-auto.mb-0.js-btn-next(type='button' title='Next') Siguiente
                                .card.multisteps-form__panel.p-3.border-radius-xl.bg-white(data-animation='FadeIn')
                                    h5.font-weight-bolder Imagen
                                    .multisteps-form__content
                                        .row.mt-3
                                            h6 Selector de imagen previamente subida* 
                                            select#choices-category.form-control(class="form-control" ng-change="unitChanged()" ng-model="data.unit" )
                                                option(ng-model="data.result" ng-selected="data.unit == item.nombreOriginal" ng-repeat="item in imagenes" ng-value="item.nombreOriginal") {{item.nombreOriginal}}
                                            button.btn.bg-gradient-primary.mb-0(type='button' id="btnResult" ng-click=('imgID(data.unit);')) Confirma Imagen Subida    
                                        .row.mt-3
                                            .col-12
                                                //label Directorio de la imagen
                                                input.multisteps-form__input.form-control(type='text'  id="inpResult2" readonly)
                                        .button-row.d-flex.mt-4  
                                        .button-row.d-flex.mt-4
                                        .button-row.d-flex.mt-4
                                        button.btn.bg-gradient-dark.ms-auto.mb-0.js-btn-prev(type='button' title='Prev') Volver    
                                        a(href="/verGrupos")                    
                                            button.btn.bg-gradient-dark.ms-auto.mb-0(type='button' value='Agregar' ng-click='grupo.imagen=despUrl();actualizacionGrupo();') Actualizar
        .container.py-4(ng-controller='NoticiaCtrl' ng-init="getNoticiaEsp('#{sala}')")
            .row
                div
                    h5 Sube tu imagen al servidor primero*
                    form(action="/files/imgperfilgrupo" method="POST" enctype="multipart/form-data")
                        input(type="file" name="upload" id="upldFile")
                        input.btn.bg-gradient-primary.mb-0(type="submit" value="Upload" id="upldButton")
                                                    
block SCRIPTS
    script(src='https://cdn.socket.io/4.4.1/socket.io.min.js' integrity='sha384-fKnu0iswBIqkjxrhQCTZ7qlLHOFEgNkRmK2vaO/LbTZSXdJfAu6ewRBdwHPhBo/H' crossorigin='anonymous')
    script(src="/socket.io/socket.io.js")
    script(src="../assets/js/clientgrupo.js")
    script(src="../assets/js/angular/A_Chat.js")
    script(src='../assets/js/A_EjemploTabla.js')
    script(src='https://demos.creative-tim.com/soft-ui-dashboard-pro/assets/js/core/popper.min.js')
    script(src='https://demos.creative-tim.com/soft-ui-dashboard-pro/assets/js/core/bootstrap.min.js')
    script(src='https://demos.creative-tim.com/soft-ui-dashboard-pro/assets/js/plugins/perfect-scrollbar.min.js')
    script(src='https://demos.creative-tim.com/soft-ui-dashboard-pro/assets/js/plugins/smooth-scrollbar.min.js')
    //script(src='https://demos.creative-tim.com/soft-ui-dashboard-pro/assets/js/plugins/choices.min.js')
    script(src='https://demos.creative-tim.com/soft-ui-dashboard-pro/assets/js/plugins/dropzone.min.js')
    script(src='https://demos.creative-tim.com/soft-ui-dashboard-pro/assets/js/plugins/quill.min.js')
    script(src='https://demos.creative-tim.com/soft-ui-dashboard-pro/assets/js/plugins/multistep-form.js')
    script.
        if (document.getElementById('edit-deschiption')) {
            var quill = new Quill('#edit-deschiption', {
                theme: 'snow' 
            });
        };

        if (document.getElementById('choices-category')) {
            var element = document.getElementById('choices-category');
            const example = new Choices(element, {
                searchEnabled: false
            });
        };

        if (document.getElementById('choices-sizes')) {
            var element = document.getElementById('choices-sizes');
            const example = new Choices(element, {
                searchEnabled: false
            });
        };

        if (document.getElementById('choices-currency')) {
            var element = document.getElementById('choices-currency');
            const example = new Choices(element, {
                searchEnabled: false
            });
        };

        if (document.getElementById('choices-tags')) {
            var tags = document.getElementById('choices-tags');
            const examples = new Choices(tags, {
                removeItemButton: true
            });
            examples.setChoices(
                [{
                    value: 'One',
                    label: 'Expired',
                    disabled: true
                }, {
                    value: 'Two',
                    label: 'Out of Stock',
                    selected: true
                }],
                'value',
                'label',
                false,
            );
        }
    script(src='https://demos.creative-tim.com/soft-ui-dashboard-pro/assets/js/plugins/dragula/dragula.min.js')
    script(src='https://demos.creative-tim.com/soft-ui-dashboard-pro/assets/js/plugins/jkanban/jkanban.js')
    script.
        var win = navigator.platform.indexOf('Win') > -1;
        if (win && document.querySelector('#sidenav-scrollbar')) {
            var options = {
                damping: '0.5'
            }
            Scrollbar.init(document.querySelector('#sidenav-scrollbar'), options);
        }
    script(async='' defer='' src='https://buttons.github.io/buttons.js')
    script(src='https://demos.creative-tim.com/soft-ui-dashboard-pro/assets/js/soft-ui-dashboard.min.js?v=1.0.4')